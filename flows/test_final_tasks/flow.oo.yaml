title: "%test-final-pdf-tasks%"
nodes:
  # Test PDF annotation
  - node_id: pdf_annotate#1
    task: self::pdf_annotate
    inputs_from:
      - handle: pdf_path
        value: "/oomol-driver/oomol-storage/test_data/test_sample.pdf"
      - handle: output_path
        value: "/oomol-driver/oomol-storage/test_data/annotated.pdf"
      - handle: annotation_type
        value: "text"
      - handle: page_number
        value: 1
      - handle: x_position
        value: 0.1
      - handle: y_position
        value: 0.9
      - handle: annotation_text
        value: "Test Annotation"
      - handle: color
        value: "#FFFF00"

  # Test PDF delete pages
  - node_id: pdf_delete_pages#1
    task: self::pdf_delete_pages
    inputs_from:
      - handle: pdf_path
        value: "/oomol-driver/oomol-storage/test_data/test_sample.pdf"
      - handle: output_path
        value: "/oomol-driver/oomol-storage/test_data/deleted_pages.pdf"
      - handle: pages_to_delete
        value: "2"

  # Test PDF OCR (requires tesseract)
  - node_id: pdf_ocr#1
    task: self::pdf_ocr
    inputs_from:
      - handle: pdf_path
        value: "/oomol-driver/oomol-storage/test_data/test_sample.pdf"
      - handle: output_path
        value: "/oomol-driver/oomol-storage/test_data/ocr_output.pdf"
      - handle: language
        value: "eng"
      - handle: dpi
        value: 300
      - handle: preserve_images
        value: true
  - node_id: pdf_rotate#1
    title: "%pdf-rotate-1%"
    inputs_from:
      - handle: pdf_path
        value: /oomol-driver/oomol-storage/pdf/page_range_1_1-100.pdf
      - handle: output_path
        value: /oomol-driver/oomol-storage/pdf/pdfeee.pdf
      - handle: rotation_angle
        value: "90"
      - handle: page_range
        value: all
    task: self::pdf_rotate

  # Test PDF watermark with background layer
  - node_id: pdf_watermark#1
    task: self::pdf_watermark
    inputs_from:
      - handle: pdf_path
        value: "/oomol-driver/oomol-storage/test_data/test_sample.pdf"
      - handle: watermark_text
        value: "CONFIDENTIAL"
      - handle: output_path
        value: "/oomol-driver/oomol-storage/test_data/watermarked_bg.pdf"
      - handle: position_x
        value: 0.5
      - handle: position_y
        value: 0.5
      - handle: layer
        value: "background"
      - handle: opacity
        value: 0.3
      - handle: font_size
        value: 48
      - handle: rotation
        value: 45
      - handle: color
        value: "#808080"
